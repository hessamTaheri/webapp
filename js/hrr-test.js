const DataHrr = [
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/3-5.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "◯",
    correctText: "دایره",
    type: "Tetaran"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/4-5.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "✕",
    correctText: "ضربدر",
    type: "Tritan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/5-6.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "◯",
    correctText: "دایره",
    type: "Tritan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/6-6.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "△",
    correctText: "مثلث",
    type: "Tetaran"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/7-7.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "✕",
    correctText: "ضربدر",
    type: "Deutan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/8-7.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "△",
    correctText: "مثلث",
    type: "Protan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/98.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "△",
    correctText: "مثلث",
    type: "Deutan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/108.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "◯",
    correctText: "دایره",
    type: "Protan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/11-9.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "◯",
    correctText: "دایره",
    type: "Deutan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/1210.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "✕",
    correctText: "ضربدر",
    type: "Protan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/13-11.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "◯",
    correctText: "دایره",
    type: "Protan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/14-11.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "△",
    correctText: "مثلث",
    type: "Deutan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/1512.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "✕",
    correctText: "ضربدر",
    type: "Deutan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/1613.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "△",
    correctText: "مثلث",
    type: "Protan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/17-14.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "✕",
    correctText: "ضربدر",
    type: "Deutan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/18-14.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "◯",
    correctText: "دایره",
    type: "Protan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/1915.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "◯",
    correctText: "دایره",
    type: "Deutan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/2015.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "✕",
    correctText: "ضربدر",
    type: "Protan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/2116.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "△",
    correctText: "مثلث",
    type: "Protan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/2216.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "◯",
    correctText: "دایره",
    type: "Deutan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/23-17.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "◯",
    correctText: "دایره",
    type: "Protan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/2417.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "△",
    correctText: "مثلث",
    type: "Deutan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/25-18.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "✕",
    correctText: "ضربدر",
    type: "Deutan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/26-18.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "△",
    correctText: "مثلث",
    type: "Protan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/27-19.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "✕",
    correctText: "ضربدر",
    type: "Protan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/28-19.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "◯",
    correctText: "دایره",
    type: "Deutan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/29-20.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "◯",
    correctText: "دایره",
    type: "Protan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/30-20.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "△",
    correctText: "مثلث",
    type: "Deutan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/31-21.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "✕",
    correctText: "ضربدر",
    type: "Tetaran"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/32-21.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "△",
    correctText: "مثلث",
    type: "Tritan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/33-22.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "◯",
    correctText: "دایره",
    type: "Tetaran"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/34-22.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "✕",
    correctText: "ضربدر",
    type: "Tritan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/35-23.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "◯",
    correctText: "دایره",
    type: "Tritan"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/36-23.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "△",
    correctText: "مثلث",
    type: "Tetaran"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/37-24.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "✕",
    correctText: "ضربدر",
    type: "Tetaran"
  },
  {
    image: "https://www.koorrangi.ir/wp-content/uploads/2023/07/38-24.jpg",
    question: "چه شکلی را در تصویر میبینید؟",
    options: ["◯", "✕", "△", "هیچ کدام"],
    correct: "△",
    correctText: "مثلث",
    type: "Tritan"
  }
];

let currentQuizeHrr = 0;
let scoreHrr = 0;
let Deutan = 0;
let Protan = 0;
let Tetaran = 0;
let Tritan = 0;
let userAnswersHrr = new Array(DataHrr.length).fill(null);

// المنت‌های DOM
const grabId = (idName) => {
  const element = document.getElementById(idName);
  if (element) return element;
  throw new Error(`المنت با شناسه ${idName} یافت نشد`);
};

const quizHrr = grabId('quiz-hrr');
const imageHrr = grabId('mamad-hrr');
const optionsListHrr = grabId('nowShowPic-hrr');
const optionLabelsHrr = [
  grabId('option1-hrr'),
  grabId('option2-hrr'),
  grabId('option3-hrr'),
  grabId('option4-hrr')
];
const btnNextHrr = grabId('btn-next-hrr');
const btnResetHrr = grabId('btn-reset-hrr');
const progressBarHrr = grabId('childbar-hrr');
const progressNumHrr = grabId('progressbarnumber-hrr');
const questionHrr = quizHrr.querySelector('h3');

// توابع هدایت
function funcNormal() {
  localStorage.setItem("Result", "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b1%d8%b1%d9%86%da%af%db%8c1/");
  document.location.href = "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b1%d8%b1%d9%86%da%af%db%8c1/";
}
function funcTotal() {
  localStorage.setItem("Result", "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b1%d8%b1%d9%86%da%af%db%8c2/");
  document.location.href = "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b1%d8%b1%d9%86%da%af%db%8c2/";
}
function funcProtanWeak() {
  localStorage.setItem("Result", "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b1%d8%b1%d9%86%da%af%db%8c3/");
  document.location.href = "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b1%d8%b1%d9%86%da%af%db%8c3/";
}
function funcProtanStrong() {
  localStorage.setItem("Result", "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b1%d8%b1%d9%86%da%af%db%8c4/");
  document.location.href = "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b1%d8%b1%d9%86%da%af%db%8c4/";
}
function funcDeutanWeak() {
  localStorage.setItem("Result", "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b1%d8%b1%d9%86%da%af%db%8c5/");
  document.location.href = "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b1%d8%b1%d9%86%da%af%db%8c5/";
}
function funcDeutanStrong() {
  localStorage.setItem("Result", "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b1%d8%b1%d9%86%da%af%db%8c6/");
  document.location.href = "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b1%d8%b1%d9%86%da%af%db%8c6/";
}
function funcDeutanProtanWeak() {
  localStorage.setItem("Result", "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b4%d8%b1%d9%86%da%af%db%8c7/");
  document.location.href = "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b1%d8%b1%d9%86%da%af%db%8c7/";
}
function funcDeutanProtan() {
  localStorage.setItem("Result", "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b1%d8%b1%d9%86%da%af%db%8c8/");
  document.location.href = "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b1%d8%b1%d9%86%da%af%db%8c8/";
}
function funcTetaranTritan() {
  localStorage.setItem("Result", "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b1%d8%b1%d9%86%da%af%db%8c9/");
  document.location.href = "https://www.koorrangi.ir/%d8%ac%d9%88%d8%a7%d8%a8-%d8%aa%d8%b3%d8%aa-%da%a9%d9%88%d8%b1%d8%b1%d9%86%da%af%db%8c9/";
}

// تابع نمایش پیام خطا
function showError(message) {
  const errorDiv = document.createElement('div');
  errorDiv.className = 'error-message';
  errorDiv.style.cssText = `
    position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
    background: #ff4444; color: white; padding: 10px 20px; border-radius: 8px;
    font-family: 'Vazirmatn', sans-serif; z-index: 1000;
  `;
  errorDiv.textContent = message;
  document.body.appendChild(errorDiv);
  setTimeout(() => errorDiv.remove(), 5000);
}

// تابع به‌روزرسانی نوار پیشرفت
function changeWidthBar(X) {
  const percentage = Math.round(((currentQuizeHrr + 1) / X.length) * 100);
  progressBarHrr.style.width = `${percentage}%`;
  console.log('عرض نوار پیشرفت:', progressBarHrr.style.width);
}

// تابع بارگذاری سوال
function loadQuizeHrr() {
  if (currentQuizeHrr >= DataHrr.length) {
    showResultHrr();
    return;
  }

  const currentData = DataHrr[currentQuizeHrr];
  questionHrr.textContent = currentData.question;
  optionsListHrr.style.display = "none";
  btnNextHrr.style.display = "none";
  imageHrr.style.display = "none";
  imageHrr.src = '';

  imageHrr.src = currentData.image;
  imageHrr.onload = () => {
    console.log('تصویر لود شد:', currentData.image);
    imageHrr.style.display = "block";
    optionsListHrr.style.display = "flex";
    currentData.options.forEach((opt, i) => {
      if (optionLabelsHrr[i]) {
        optionLabelsHrr[i].innerHTML = opt;
      } else {
        console.error(`لیبل گزینه ${i + 1} یافت نشد`);
      }
    });
    document.querySelectorAll("input[name='answer-hrr']").forEach(r => {
      r.checked = false;
    });
    changeWidthBar(DataHrr);
    progressNumHrr.textContent = `سوال ${currentQuizeHrr + 1} از ${DataHrr.length}`;
  };

  imageHrr.onerror = () => {
    console.error('خطا در بارگذاری تصویر:', currentData.image);
    showError('خطا در بارگذاری تصویر سوال. لطفاً اتصال اینترنت یا آدرس تصویر را بررسی کنید.');
    imageHrr.style.display = "none";
    optionsListHrr.style.display = "flex";
    currentData.options.forEach((opt, i) => {
      if (optionLabelsHrr[i]) {
        optionLabelsHrr[i].innerHTML = opt;
      }
    });
  };

  // فال‌بک برای نمایش
  setTimeout(() => {
    if (imageHrr.style.display !== "block" || optionsListHrr.style.display !== "flex") {
      console.warn('فال‌بک: نمایش تصویر و گزینه‌ها به دلیل تأخیر');
      imageHrr.style.display = "block";
      optionsListHrr.style.display = "flex";
      currentData.options.forEach((opt, i) => {
        if (optionLabelsHrr[i]) {
          optionLabelsHrr[i].innerHTML = opt;
        }
      });
    }
  }, 1000);
}

// تابع بررسی پاسخ
function checkAnswerHrr() {
  const currentData = DataHrr[currentQuizeHrr];
  const selected = document.querySelector("input[name='answer-hrr']:checked");
  if (!selected) {
    showError("لطفاً یک گزینه انتخاب کنید");
    return;
  }
  const answer = document.querySelector(`label[for=${selected.id}]`).innerHTML;
  userAnswersHrr[currentQuizeHrr] = answer;
  if (answer === currentData.correct) {
    scoreHrr++;
    if (currentData.type === "Protan") Protan++;
    if (currentData.type === "Deutan") Deutan++;
    if (currentData.type === "Tetaran") Tetaran++;
    if (currentData.type === "Tritan") Tritan++;
  }
  btnNextHrr.style.display = "inline-block";
}

// تابع رفتن به سوال بعدی
function nextQuestionHrr() {
  currentQuizeHrr++;
  if (currentQuizeHrr < DataHrr.length) {
    loadQuizeHrr();
  } else {
    showResultHrr();
  }
}

// تابع نمایش نتیجه
function showResultHrr() {
  quizHrr.style.display = "none";
  optionsListHrr.style.display = "none";
  btnNextHrr.style.display = "none";
  btnResetHrr.style.display = "inline-block";
  progressNumHrr.textContent = `امتیاز شما: ${scoreHrr} از ${DataHrr.length}`;

  // منطق تشخیص نوع کوررنگی
  let level = "";
  if (scoreHrr >= 32) { // آستانه برای دید نرمال
    funcNormal();
  } else if (scoreHrr <= 12) { // آستانه برای کوررنگی کامل
    funcTotal();
  } else {
    if ((100 / 28) * (Deutan + Protan) < (100 / 14) * (Tetaran + Tritan)) {
      if (Deutan > Protan) {
        if (Deutan >= 10) level = "قوی";
        else if (Deutan >= 6) level = "ضعیف";
        else level = "خفیف";
        console.log(`کوررنگی دیوتان ${level} - امتیاز دیوتان: ${Deutan}, پروتان: ${Protan}`);
        if (level === "قوی") funcDeutanStrong();
        else funcDeutanWeak();
      } else {
        if (Protan >= 10) level = "قوی";
        else if (Protan >= 6) level = "ضعیف";
        else level = "خفیف";
        console.log(`کوررنگی پروتان ${level} - امتیاز دیوتان: ${Deutan}, پروتان: ${Protan}`);
        if (level === "قوی") funcProtanStrong();
        else funcProtanWeak();
      }
    } else {
      if (Tetaran > Tritan) {
        if (Tetaran >= 6) level = "قوی";
        else if (Tetaran >= 4) level = "ضعیف";
        else level = "خفیف";
        console.log(`کوررنگی تتاران ${level} - امتیاز تتاران: ${Tetaran}, تریتان: ${Tritan}`);
        funcTetaranTritan();
      } else {
        if (Tritan >= 6) level = "قوی";
        else if (Tritan >= 4) level = "ضعیف";
        else level = "خفیف";
        console.log(`کوررنگی تریتان ${level} - امتیاز تتاران: ${Tetaran}, تریتان: ${Tritan}`);
        funcTetaranTritan();
      }
    }
  }
}

// تابع ریست کوییز
function resetQuizHrr() {
  currentQuizeHrr = 0;
  scoreHrr = 0;
  Deutan = 0;
  Protan = 0;
  Tetaran = 0;
  Tritan = 0;
  userAnswersHrr.fill(null);
  quizHrr.style.display = "block";
  btnResetHrr.style.display = "none";
  loadQuizeHrr();
}

// تابع اولیه‌سازی تست
function initHrrTest() {
  // بررسی وجود المنت‌ها
  try {
    quizHrr; imageHrr; optionsListHrr; btnNextHrr; btnResetHrr; progressBarHrr; progressNumHrr;
    if (!questionHrr) throw new Error('المنت h3 برای سوال یافت نشد');
    optionLabelsHrr.forEach((label, i) => {
      if (!label) throw new Error(`لیبل گزینه ${i + 1} یافت نشد`);
    });
  } catch (e) {
    console.error('یکی از المنت‌های موردنیاز برای تست HRR یافت نشد:', e.message);
    showError('خطا: نمی‌توان تست HRR را بارگذاری کرد. لطفاً ساختار HTML را بررسی کنید.');
    return;
  }

  // Event Listenerها
  btnNextHrr.addEventListener("click", nextQuestionHrr);
  btnResetHrr.addEventListener("click", resetQuizHrr);
  document.querySelectorAll("input[name='answer-hrr']").forEach(input => {
    input.addEventListener("change", checkAnswerHrr);
  });

  // شروع کوییز
  loadQuizeHrr();
}

// اجرای تابع هنگام بارگذاری صفحه
document.addEventListener('DOMContentLoaded', () => {
  if (document.getElementById('tool-hrr-test')) {
    initHrrTest();
  }
});